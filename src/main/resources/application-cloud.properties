# Cloud 환경 최적화 설정

# Kafka 비활성화 (사용 안 함)
spring.kafka.enabled=false
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration

# JPA 최적화
spring.jpa.hibernate.ddl-auto=update
spring.jpa.open-in-view=false
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# HikariCP 연결 풀 최적화 (메모리 절약)
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# Tomcat 최적화
server.tomcat.threads.max=50
server.tomcat.threads.min-spare=10
server.tomcat.connection-timeout=20000
server.tomcat.max-connections=200
server.tomcat.accept-count=100

# 캐시 최적화
spring.cache.caffeine.spec=maximumSize=50,expireAfterWrite=5m

# H2 Console 비활성화 (프로덕션)
spring.h2.console.enabled=false

# 로깅 최적화
logging.level.root=WARN
logging.level.com.example.payflow=INFO
logging.level.org.springframework=WARN
logging.level.org.hibernate=WARN

# Actuator 최소화
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=when-authorized

# 배너 비활성화 (메모리 절약)
spring.main.banner-mode=off

# Lazy 초기화 활성화 (부팅 속도 향상)
spring.main.lazy-initialization=true

# WebSocket 비활성화 (필요시)
# spring.websocket.enabled=false
