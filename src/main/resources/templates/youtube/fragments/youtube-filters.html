<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <!-- 탭 & 필터 Fragment -->
    <div th:fragment="controls" class="controls-section">
        <div class="tab-menu">
            <div class="tab-buttons">
                <button class="tab-btn active" data-tab="popular" onclick="switchTab('popular')">
                    <span class="material-symbols-outlined">local_fire_department</span>
                    인기 급상승
                </button>
                <button class="tab-btn" data-tab="search" onclick="switchTab('search')">
                    <span class="material-symbols-outlined">search</span>
                    검색 결과
                </button>
                <button class="tab-btn" data-tab="favorites" onclick="switchTab('favorites')">
                    <span class="material-symbols-outlined">folder_special</span>
                    즐겨찾기
                </button>
            </div>
            <button class="btn-refresh" onclick="loadCurrentTab()">
                <span class="material-symbols-outlined">refresh</span>
                새로고침
            </button>
        </div>

        <div class="filter-section" id="regionFilter">
            <div class="filter-group">
                <label for="regionCode">국가:</label>
                <select id="regionCode">
                    <optgroup label="아시아">
                        <option value="KR" selected>🇰🇷 한국</option>
                        <option value="JP">🇯🇵 일본</option>
                        <option value="CN">🇨🇳 중국</option>
                        <option value="TW">🇹🇼 대만</option>
                        <option value="HK">🇭🇰 홍콩</option>
                        <option value="SG">🇸🇬 싱가포르</option>
                        <option value="TH">🇹🇭 태국</option>
                        <option value="VN">🇻🇳 베트남</option>
                        <option value="ID">🇮🇩 인도네시아</option>
                        <option value="MY">🇲🇾 말레이시아</option>
                        <option value="PH">🇵🇭 필리핀</option>
                        <option value="IN">🇮🇳 인도</option>
                    </optgroup>
                    <optgroup label="북미">
                        <option value="US">🇺🇸 미국</option>
                        <option value="CA">🇨🇦 캐나다</option>
                        <option value="MX">🇲🇽 멕시코</option>
                    </optgroup>
                    <optgroup label="유럽">
                        <option value="GB">🇬🇧 영국</option>
                        <option value="DE">🇩🇪 독일</option>
                        <option value="FR">🇫🇷 프랑스</option>
                        <option value="IT">🇮🇹 이탈리아</option>
                        <option value="ES">🇪🇸 스페인</option>
                        <option value="NL">🇳🇱 네덜란드</option>
                        <option value="SE">🇸🇪 스웨덴</option>
                        <option value="NO">🇳🇴 노르웨이</option>
                        <option value="PL">🇵🇱 폴란드</option>
                        <option value="RU">🇷🇺 러시아</option>
                    </optgroup>
                    <optgroup label="오세아니아">
                        <option value="AU">🇦🇺 호주</option>
                        <option value="NZ">🇳🇿 뉴질랜드</option>
                    </optgroup>
                    <optgroup label="남미">
                        <option value="BR">🇧🇷 브라질</option>
                        <option value="AR">🇦🇷 아르헨티나</option>
                        <option value="CL">🇨🇱 칠레</option>
                        <option value="CO">🇨🇴 콜롬비아</option>
                    </optgroup>
                    <optgroup label="중동/아프리카">
                        <option value="SA">🇸🇦 사우디아라비아</option>
                        <option value="AE">🇦🇪 아랍에미리트</option>
                        <option value="IL">🇮🇱 이스라엘</option>
                        <option value="TR">🇹🇷 터키</option>
                        <option value="ZA">🇿🇦 남아프리카공화국</option>
                        <option value="EG">🇪🇬 이집트</option>
                    </optgroup>
                </select>
            </div>
            <div class="filter-group">
                <label for="maxResults">개수:</label>
                <select id="maxResults">
                    <option value="10">10개</option>
                    <option value="25" selected>25개</option>
                    <option value="50">50개</option>
                    <option value="50">100개</option>
                    <option value="50">200개</option>
                    <option value="50">300개</option>
                    <option value="50">500개</option>
                </select>
            </div>
        </div>
    </div>

    <!-- 필터 & 정렬 섹션 Fragment -->
    <div th:fragment="sort-filter" class="filter-sort-section">
        <div class="filter-sort-header">
            <span class="material-symbols-outlined">tune</span>
            <span>필터 & 정렬</span>
        </div>

        <!-- 퀵 필터 프리셋 -->
        <div class="quick-filters">
            <button class="quick-filter-btn" onclick="applyPreset('all')" data-preset="all">
                <span class="material-symbols-outlined">grid_view</span>
                전체보기
            </button>
            <button class="quick-filter-btn" onclick="applyPreset('high-engagement')">
                <span class="material-symbols-outlined">local_fire_department</span>
                고참여율 (5%↑)
            </button>
            <button class="quick-filter-btn" onclick="applyPreset('viral')">
                <span class="material-symbols-outlined">rocket_launch</span>
                바이럴 영상
            </button>
            <button class="quick-filter-btn" onclick="applyPreset('top-performance')">
                <span class="material-symbols-outlined">star</span>
                고성과 (60점↑)
            </button>
            <button class="quick-filter-btn" onclick="applyPreset('popular')">
                <span class="material-symbols-outlined">trending_up</span>
                인기영상 (10만↑)
            </button>
        </div>

        <!-- 정렬 & 고급 필터 -->
        <div class="filter-sort-controls">
            <div class="sort-group">
                <label for="sortBy">
                    <span class="material-symbols-outlined">sort</span>
                    정렬
                </label>
                <select id="sortBy" onchange="applySortAndFilter()">
                    <option value="default">기본 순서</option>
                    <option value="views-desc">조회수 높은순</option>
                    <option value="views-asc">조회수 낮은순</option>
                    <option value="engagement-desc">참여율 높은순</option>
                    <option value="engagement-asc">참여율 낮은순</option>
                    <option value="performance-desc">성과도 높은순</option>
                    <option value="performance-asc">성과도 낮은순</option>
                    <option value="likes-desc">좋아요 많은순</option>
                    <option value="comments-desc">댓글 많은순</option>
                </select>
            </div>

            <!-- 슬라이더 필터 -->
            <div class="slider-group">
                <label for="minViewsSlider">
                    <span class="material-symbols-outlined">visibility</span>
                    최소 조회수: <span id="minViewsValue">0</span>
                </label>
                <input type="range" id="minViewsSlider" min="0" max="1000000" step="10000" value="0" oninput="updateSliderValue('minViews', this.value)">
                <div class="slider-marks">
                    <span>0</span>
                    <span>25만</span>
                    <span>50만</span>
                    <span>75만</span>
                    <span>100만</span>
                </div>
            </div>

            <div class="slider-group">
                <label for="minEngagementSlider">
                    <span class="material-symbols-outlined">local_fire_department</span>
                    최소 참여율: <span id="minEngagementValue">0</span>%
                </label>
                <input type="range" id="minEngagementSlider" min="0" max="10" step="0.5" value="0" oninput="updateSliderValue('minEngagement', this.value)">
                <div class="slider-marks">
                    <span>0%</span>
                    <span>2.5%</span>
                    <span>5%</span>
                    <span>7.5%</span>
                    <span>10%</span>
                </div>
            </div>

            <div class="slider-group">
                <label for="minPerformanceSlider">
                    <span class="material-symbols-outlined">star</span>
                    최소 성과도: <span id="minPerformanceValue">0</span>점
                </label>
                <input type="range" id="minPerformanceSlider" min="0" max="100" step="10" value="0" oninput="updateSliderValue('minPerformance', this.value)">
                <div class="slider-marks">
                    <span>0</span>
                    <span>25</span>
                    <span>50</span>
                    <span>75</span>
                    <span>100</span>
                </div>
            </div>

            <button class="btn-reset-filter" onclick="resetFilters()">
                <span class="material-symbols-outlined">restart_alt</span>
                초기화
            </button>
        </div>

        <div class="filter-result-count" id="filterResultCount" style="display: none;">
            <span class="material-symbols-outlined">info</span>
            <span id="filterResultText"></span>
        </div>
        
        <div class="sort-info" id="sortInfo" style="display: none;">
            <span class="material-symbols-outlined">sort</span>
            <span id="sortInfoText"></span>
        </div>
    </div>
</body>
</html>
