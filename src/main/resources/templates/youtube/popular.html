<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko"></html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube 인기 급상승 영상</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
    <link rel="stylesheet" th:href="@{/css/youtube-popular.css}">
</head>
<body>
    <header class="youtube-header">
        <div class="header-content">
            <a href="/youtube/popular" class="logo">
                <span class="youtube-icon">
                    <svg viewBox="0 0 120 84" fill="#FF0000" xmlns="http://www.w3.org/2000/svg">
                        <path d="M117.5 13.125C116.062 7.875 111.375 3.375 106.25 2.125C97 0.875 60 0.875 60 0.875C60 0.875 23 0.875 13.75 2.125C8.625 3.375 3.9375 7.875 2.5 13.125C1.25 18.5 1.25 31.5 1.25 31.5C1.25 31.5 1.25 44.5 2.5 49.875C3.9375 55.125 8.625 59.625 13.75 60.875C23 62.125 60 62.125 60 62.125C60 62.125 97 62.125 106.25 60.875C111.375 59.625 116.062 55.125 117.5 49.875C118.75 44.5 118.75 31.5 118.75 31.5C118.75 31.5 118.75 18.5 117.5 13.125Z"/>
                        <path d="M48.125 44.25L78.125 31.5L48.125 18.75V44.25Z" fill="white"/>
                    </svg>
                </span>
                YouTube 트렌드
            </a>
        </div>
    </header>

    <div class="container">
        <div class="page-header">
            <h1>
                <span class="material-symbols-outlined fire-icon">local_fire_department</span>
                YouTube 인기 급상승
            </h1>
            <p>실시간 인기 영상을 확인하세요</p>
        </div>

        <!-- 검색 섹션 -->
        <div class="search-section">
            <div class="search-box">
                <input type="text" id="searchQuery" placeholder="검색어를 입력하세요..." onkeypress="handleSearchKeypress(event)">
                <button class="btn-search" onclick="searchVideos()">
                    <span class="material-symbols-outlined">search</span>
                    검색
                </button>
            </div>
        </div>

        <!-- 탭 & 필터 -->
        <div class="controls-section">
            <div class="tab-menu">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="popular" onclick="switchTab('popular')">
                        <span class="material-symbols-outlined">local_fire_department</span>
                        인기 급상승
                    </button>
                    <button class="tab-btn" data-tab="search" onclick="switchTab('search')">
                        <span class="material-symbols-outlined">search</span>
                        검색 결과
                    </button>
                </div>
                <button class="btn-refresh" onclick="loadCurrentTab()">
                    <span class="material-symbols-outlined">refresh</span>
                    새로고침
                </button>
            </div>

            <div class="filter-section" id="regionFilter">
                <div class="filter-group">
                    <label for="regionCode">국가:</label>
                    <select id="regionCode">
                        <option value="KR" selected>🇰🇷 한국</option>
                        <option value="US">🇺🇸 미국</option>
                        <option value="JP">🇯🇵 일본</option>
                        <option value="GB">🇬🇧 영국</option>
                        <option value="DE">🇩🇪 독일</option>
                        <option value="FR">🇫🇷 프랑스</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="maxResults">개수:</label>
                    <select id="maxResults">
                        <option value="10">10개</option>
                        <option value="25" selected>25개</option>
                        <option value="50">50개</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- 크리에이터 인사이트 섹션 -->
        <div id="insights-section" class="insights-section" style="display: none;">
            <div class="insights-header">
                <h2>
                    <span class="material-symbols-outlined">insights</span>
                    크리에이터 인사이트
                </h2>
                <p>인기 영상 데이터를 분석한 트렌드 정보</p>
            </div>
            <div class="insights-grid">
                <div class="insight-card">
                    <div class="insight-icon">🔥</div>
                    <div class="insight-content">
                        <div class="insight-label">인기 키워드</div>
                        <div class="insight-value" id="insight-keywords">-</div>
                    </div>
                </div>
                <div class="insight-card">
                    <div class="insight-icon">⏱️</div>
                    <div class="insight-content">
                        <div class="insight-label">평균 영상 길이</div>
                        <div class="insight-value" id="insight-duration">-</div>
                    </div>
                </div>
                <div class="insight-card">
                    <div class="insight-icon">📊</div>
                    <div class="insight-content">
                        <div class="insight-label">평균 참여율</div>
                        <div class="insight-value" id="insight-engagement">-</div>
                    </div>
                </div>
                <div class="insight-card">
                    <div class="insight-icon">👁️</div>
                    <div class="insight-content">
                        <div class="insight-label">평균 조회수</div>
                        <div class="insight-value" id="insight-views">-</div>
                    </div>
                </div>
                <div class="insight-card">
                    <div class="insight-icon">📝</div>
                    <div class="insight-content">
                        <div class="insight-label">평균 제목 길이</div>
                        <div class="insight-value" id="insight-title-length">-</div>
                    </div>
                </div>
                <div class="insight-card">
                    <div class="insight-icon">🏆</div>
                    <div class="insight-content">
                        <div class="insight-label">참여율 TOP 영상</div>
                        <div class="insight-value insight-small" id="insight-top-engagement">-</div>
                    </div>
                </div>
            </div>
            <div class="insights-tips">
                <div class="tips-header">
                    <span class="material-symbols-outlined">lightbulb</span>
                    콘텐츠 제작 팁
                </div>
                <div class="tips-content" id="insight-tips">
                    데이터를 분석 중입니다...
                </div>
            </div>
        </div>

        <div id="loading" class="loading" style="display: none;">
            <div class="loading-spinner"></div>
            <p>인기 영상을 불러오는 중...</p>
        </div>

        <div id="error" class="error-message" style="display: none;">
            <h3>⚠️ 오류 발생</h3>
            <p id="error-text"></p>
        </div>

        <div id="video-list" class="video-list"></div>
    </div>

    <script th:src="@{/js/youtube-popular.js}"></script>
</body>
</html>
